<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Honours 2025 pilot</title>
  <script src="https://unpkg.com/jspsych@6.3.1/jspsych.js"></script>
  <script src="https://unpkg.com/jspsych@6.3.1/plugins/jspsych-preload.js"></script>
  <script src="https://unpkg.com/jspsych@6.3.1/plugins/jspsych-image-keyboard-response.js"></script>
  <script src="https://unpkg.com/jspsych@6.3.1/plugins/jspsych-survey-likert.js"></script>
  <script src="https://unpkg.com/jspsych@6.3.1/plugins/jspsych-html-keyboard-response.js"></script>
  <link href="https://unpkg.com/jspsych@6.3.1/css/jspsych.css" rel="stylesheet" />
</head>
<body></body>

<script>
  const trial_images = [
    { img1: 'img/fixation.png', img2: 'img/baseballbase_c.jpg', img3: 'img/mask.jpg' },
    { img1: 'img/fixation.png', img2: 'img/baseballcatch_c.jpg', img3: 'img/mask.jpg' },
    { img1: 'img/fixation.png', img2: 'img/baseballhit_c.jpg', img3: 'img/mask.jpg' },
    { img1: 'img/fixation.png', img2: 'img/basketball_c.jpg', img3: 'img/mask.jpg' },
    { img1: 'img/fixation.png', img2: 'img/birthday_c.jpg', img3: 'img/mask.jpg' },
    { img1: 'img/fixation.png', img2: 'img/bowling_c.jpg', img3: 'img/mask.jpg' },
    { img1: 'img/fixation.png', img2: 'img/boy_game_c.jpg', img3: 'img/mask.jpg' },
    { img1: 'img/fixation.png', img2: 'img/boy_pulling_tree_c.jpg', img3: 'img/mask.jpg' },
    { img1: 'img/fixation.png', img2: 'img/bride_c.jpg', img3: 'img/mask.jpg' },
    { img1: 'img/fixation.png', img2: 'img/bubbles_c.jpg', img3: 'img/mask.jpg' },
    { img1: 'img/fixation.png', img2: 'img/construction_c.jpg', img3: 'img/mask.jpg' },
    { img1: 'img/fixation.png', img2: 'img/cyclist_trail_c.jpg', img3: 'img/mask.jpg' },
    { img1: 'img/fixation.png', img2: 'img/diver_c.jpg', img3: 'img/mask.jpg' },
    { img1: 'img/fixation.png', img2: 'img/falcon_c.jpg', img3: 'img/mask.jpg' },
    { img1: 'img/fixation.png', img2: 'img/family_toboggan_c.jpg', img3: 'img/mask.jpg' },
    { img1: 'img/fixation.png', img2: 'img/fieldhockey_c.jpg', img3: 'img/mask.jpg' },
    { img1: 'img/fixation.png', img2: 'img/fireman_c.jpg', img3: 'img/mask.jpg' },
    { img1: 'img/fixation.png', img2: 'img/fishing_c.jpg', img3: 'img/mask.jpg' },
    { img1: 'img/fixation.png', img2: 'img/footballcatch_c.jpg', img3: 'img/mask.jpg' },
    { img1: 'img/fixation.png', img2: 'img/footballkick_c.jpg', img3: 'img/mask.jpg' },
    { img1: 'img/fixation.png', img2: 'img/golfhit_C.jpg', img3: 'img/mask.jpg' },
    { img1: 'img/fixation.png', img2: 'img/golf_c.jpg', img3: 'img/mask.jpg' },
    { img1: 'img/fixation.png', img2: 'img/gymnastics_C.jpg', img3: 'img/mask.jpg' },
    { img1: 'img/fixation.png', img2: 'img/highjump_c.jpg', img3: 'img/mask.jpg' },
    { img1: 'img/fixation.png', img2: 'img/hockey_c.jpg', img3: 'img/mask.jpg' },
    { img1: 'img/fixation.png', img2: 'img/horsejump_c.jpg', img3: 'img/mask.jpg' },
    { img1: 'img/fixation.png', img2: 'img/juggler_c.jpg', img3: 'img/mask.jpg' },
    { img1: 'img/fixation.png', img2: 'img/lacrosse_c.jpg', img3: 'img/mask.jpg' },
    { img1: 'img/fixation.png', img2: 'img/lawnbowler_c.jpg', img3: 'img/mask.jpg' },
    { img1: 'img/fixation.png', img2: 'img/pizza_c.jpg', img3: 'img/mask.jpg' },
    { img1: 'img/fixation.png', img2: 'img/pool_c.jpg', img3: 'img/mask.jpg' },
    { img1: 'img/fixation.png', img2: 'img/soccerkick_c.jpg', img3: 'img/mask.jpg' },
    { img1: 'img/fixation.png', img2: 'img/soccer_c.jpg', img3: 'img/mask.jpg' },
    { img1: 'img/fixation.png', img2: 'img/squirrel_c.jpg', img3: 'img/mask.jpg' },
    { img1: 'img/fixation.png', img2: 'img/tennis_c.jpg', img3: 'img/mask.jpg' },
    { img1: 'img/fixation.png', img2: 'img/track_c.jpg', img3: 'img/mask.jpg' },
    { img1: 'img/fixation.png', img2: 'img/volleyball_c.jpg', img3: 'img/mask.jpg' },
    { img1: 'img/fixation.png', img2: 'img/woman_and_dog_c.jpg', img3: 'img/mask.jpg' }
  ];

  const timeline = [];

  trial_images.forEach(trial => {
    timeline.push(
      {
        type: 'image-keyboard-response',
        stimulus: trial.img1,
        choices: jsPsych.NO_KEYS,
        trial_duration: 800
      },
      {
        type: 'image-keyboard-response',
        stimulus: trial.img2,
        choices: jsPsych.NO_KEYS,
        trial_duration: 250
      },
      {
        type: 'image-keyboard-response',
        stimulus: trial.img3,
        choices: jsPsych.NO_KEYS,
        trial_duration: 42
      },
      {
        type: 'survey-likert',
        questions: [{
          prompt: '<img src="' + trial.img2 + '" style="max-height:800px;"><br><br>Compared to when you first saw this image, the camera distance is...',
          labels: ["Much farther away", "Slightly farther", "The same", "Slightly closer", "Much closer"],
          required: true
        }]
      }
    );
  });

  const end_screen = {
    type: 'html-keyboard-response',
    stimulus: "<p>Thank you for completing the study.</p><p>Your responses are being saved.</p><p>You will be redirected shortly...</p>",
    choices: jsPsych.NO_KEYS,
    trial_duration: 2000
  };

  timeline.push(end_screen);

  jsPsych.init({
    timeline: timeline,
    on_finish: function () {
      const csvData = jsPsych.data.get().csv();
//redirect to Qual
      fetch("https://script.google.com/macros/s/AKfycbxwtwFOFowkuQEQU8Iy91oEjWkoya9VmGdTIcqV4-YeCOqjaq-8pa2qz6nv5RJ7kFHW/exec", {
        method: "POST",
        mode: "no-cors",
        headers: {
          "Content-Type": "application/x-www-form-urlencoded"
        },
        body: "data=" + encodeURIComponent(csvData)
      });
//may need to make longer - delay for data send
      setTimeout(function () {
        window.location.href = "https://adelaideunisop.syd1.qualtrics.com/jfe/form/SV_3VFqrmNxkKjcuXQ";
      }, 2500); 
    }
  });
</script>
</html>
